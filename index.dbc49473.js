function e(e,t,n,i){Object.defineProperty(e,t,{get:n,set:i,enumerable:!0,configurable:!0})}function t(e){return e&&e.__esModule?e.default:e}var n="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},i={},o={},s=n.parcelRequired7c6;null==s&&((s=function(e){if(e in i)return i[e].exports;if(e in o){var t=o[e];delete o[e];var n={id:e,exports:{}};return i[e]=n,t.call(n.exports,n,n.exports),n.exports}var s=new Error("Cannot find module '"+e+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(e,t){o[e]=t},n.parcelRequired7c6=s),s.register("kyEFX",(function(t,n){var i,o;e(t.exports,"register",(function(){return i}),(function(e){return i=e})),e(t.exports,"resolve",(function(){return o}),(function(e){return o=e}));var s={};i=function(e){for(var t=Object.keys(e),n=0;n<t.length;n++)s[t[n]]=e[t[n]]},o=function(e){var t=s[e];if(null==t)throw new Error("Could not resolve bundle with id "+e);return t}})),s("kyEFX").register(JSON.parse('{"5ZPII":"index.dbc49473.js","8Ac76":"no-photo.8c94442b.png","8aJ8o":"index.71e4ef0f.css"}'));async function r(e=1){return await fetch(`https://api.themoviedb.org/3/trending/movie/day?api_key=583e8699bc133adc4a2f7322eb108f1f&page=${e}`).then((e=>{if(!e.ok)throw new Error(e.statusText);return e.json()}))}async function l(e){return await fetch(`https://api.themoviedb.org/3/search/movie?api_key=583e8699bc133adc4a2f7322eb108f1f&query=${e}`).then((e=>{if(!e.ok)throw new Error(e.statusText);return e.json()}))}async function a(e){return await fetch(`https://api.themoviedb.org/3/movie/${e}?api_key=583e8699bc133adc4a2f7322eb108f1f`).then((e=>{if(!e.ok)throw new Error(e.statusText);return e.json()}))}async function c(){const e=await fetch("https://api.themoviedb.org/3/genre/movie/list?api_key=583e8699bc133adc4a2f7322eb108f1f");return await e.json()}var d;d=new URL(s("kyEFX").resolve("8Ac76"),import.meta.url).toString();function u(e){return e.map((e=>function(e){const{title:n,release_date:i,id:o,poster_path:s}=e;let r=`http://image.tmdb.org/t/p/w500${s}`;e.poster_path||(r=t(d));return`<li class="films__item" data-id="${o}">\n        <img class="films__img" src="${r}" alt="${n}">\n        <h3 class="films__description text">${n}</h3>\n        <span class="filmsGenres"></span>\n        <span class="films__description text films__release"> | ${i.split("-")[0]}</span></li>`}(e))).join("")}function p(e){const{poster_path:n,title:i,vote_average:o,vote_count:s,popularity:r,original_title:l,genres:a,overview:c}=e;let u=`http://image.tmdb.org/t/p/w500${n}`;e.poster_path||(u=t(d));let p=a.map((e=>e.name)).join(", ");return`<img src="${u}" alt="${i}" class="backdrop__description-img films__img">\n        <div class="backdrop__info"><h2 class="backdrop__description-title text">${i}</h2>\n        <div class="backdrop__description-block">\n        <p class="backdrop__description-option text">Vote / Votes</p>\n        <div class="backdrop__description-value">\n        <button class="text backdrop__description-vote">${o.toFixed(1)}</button>\n        <span class="text">/</span>\n        <button class="text backdrop__description-vote vote_count">${s}</button></div>\n        <p class="backdrop__description-option text">Popularity</p>\n        <p class="backdrop__description-value text">${r.toFixed(1)}</p>\n        <p class="backdrop__description-option text">Original Title</p>\n        <p class="backdrop__description-value text">${l}</p>\n        <p class="backdrop__description-option text">Genre</p>\n        <p class="backdrop__description-value text">${p}</p>\n        </div>\n          <h3 class="backdrop__description-text_title text">About</h3>\n          <p class="backdrop__description-text text">${c}</p></div>`}function f(){const e=document.querySelector(".js-close-btn"),t=document.querySelector(".js-backdrop"),n=document.querySelector(".js-backdrop-modal");t.classList.remove("is-hidden"),e.addEventListener("click",(function(){t.classList.add("is-hidden")})),window.addEventListener("keydown",(function e(n){"Escape"===n.code&&t.classList.add("is-hidden");t.classList.contains("is-hidden")&&window.removeEventListener("keydown",e)})),window.addEventListener("mousedown",(function e(i){n.contains(i.target)||t.classList.add("is-hidden");t.classList.contains("is-hidden")&&window.removeEventListener("mousedown",e)}))}const m={keyWatchFilm:"watchFilm",keyQueFilm:"queFilm"},h=document.querySelector(".js-film_list"),_=document.querySelector(".js-film-form"),v=document.querySelector(".pagination"),g=document.querySelector(".js-pagination__list"),b=document.querySelector(".js-pagination__arrow_prev"),y=document.querySelector(".js-pagination__arrow_next"),w=document.querySelector(".backdrop__description"),k=document.querySelector(".js-btn-watch"),E=document.querySelector(".js-btn-que"),x=document.querySelector(".js-error"),S=document.querySelector(".js-error_search"),L=document.querySelector(".loader");let j=1,q={};var $;let F=null!==($=JSON.parse(localStorage.getItem(m.keyWatchFilm)))&&void 0!==$?$:[];var T;let H=null!==(T=JSON.parse(localStorage.getItem(m.keyQueFilm)))&&void 0!==T?T:[];function O(){x.style.display="block",b.style.display="none",y.style.display="none",L.style.display="none"}function C(){S.style.display="block"}function N(e){c().then((t=>{let n=h.getElementsByClassName("filmsGenres"),i=[];for(let n=0;n<t.genres.length;n+=1){let n=[];for(let o=0;o<e.length;o+=1)n.splice(0,n.length),e[o].genre_ids.forEach((function(e){let i=t.genres.find((t=>t.id===e));n.push(i.name)})),i.push(n.join(", "))}for(let e=0;e<n.length;e+=1)n[e].textContent=i[e]})).catch((()=>{O()}))}if(_.addEventListener("submit",A),h.addEventListener("click",(function(e){if(e.target===h)return;let t=e.target.closest(".films__item").dataset.id;f(),a(t).then((e=>{w.innerHTML=p(e),q=e,L.style.display="none"})).catch((()=>{O()})),q={}})),E.addEventListener("click",(function(){if(H.some((({id:e})=>Number(e)===q.id)))return;H.push(q),localStorage.setItem(m.keyQueFilm,JSON.stringify(H))})),k.addEventListener("click",(function(){if(F.some((({id:e})=>e===q.id)))return;F.push(q),localStorage.setItem(m.keyWatchFilm,JSON.stringify(F))})),r().then((e=>{h.insertAdjacentHTML("beforeend",u(e.results)),console.log(e.results),N(e.results),r().then((e=>{for(let t=1;t<=e.total_pages;t+=1){let e=document.createElement("li");e.classList.add("pagination__item"),e.classList.add("text"),e.textContent=t,g.appendChild(e)}let t;n(g.children[0]);for(let e of g.children)e.addEventListener("click",(function(){n(this)}));function n(e){t&&t.classList.remove("active"),t=e,e.classList.add("active"),j=e.textContent,r(j).then((e=>{h.insertAdjacentHTML("beforeend",u(e.results)),N(e.results),L.style.display="none"})).catch((()=>{O(),v.style.display="none"})),h.innerHTML="",s()}function i(){t.nextElementSibling&&n(t.nextElementSibling)}function o(){t.previousElementSibling&&n(t.previousElementSibling)}function s(){let e=[...g.children];if(e.length>5){e.forEach((e=>e.classList.add("hide"))),e[0].classList.remove("hide");try{t.previousElementSibling&&(t.previousElementSibling.classList.remove("hide"),t.previousElementSibling.previousElementSibling.classList.remove("hide")),t.classList.remove("hide"),t.nextElementSibling&&(t.nextElementSibling.classList.remove("hide"),t.nextElementSibling.nextElementSibling.classList.remove("hide"))}catch{t.previousElementSibling&&t.previousElementSibling.classList.remove("hide"),t.classList.remove("hide"),t.nextElementSibling&&t.nextElementSibling.classList.remove("hide")}}}y.addEventListener("click",i),b.addEventListener("click",o)})).catch((e=>console.log(e))),L.style.display="none"})).catch((()=>{O()})),_[0].value){window.addEventListener("keydown",(function e(t){"Enter"===t.code&&A();_[0].value||window.removeEventListener("keydown",e);console.log(t.code)}))}function A(e){e.preventDefault(),v.style.display="none",S.style.display="none";let t=e.currentTarget.searchQuery.value.toLowerCase().split(" ");for(let e=0;e<t.length;e+=1)t[e]=t[e][0].toUpperCase()+t[e].substr(1);l(t.join(" ")).then((e=>{if(console.log(e),h.innerHTML=u(e.results),N(e.results),e.results.forEach((function(e){if(!e.poster_path)throw new Error("There is no picture")})),!e.total_results)throw new C;h.innerHTML="",L.style.display="none"})).catch((()=>{console.log("There is no picture")})),e.currentTarget.searchQuery.value=""}
//# sourceMappingURL=index.dbc49473.js.map
