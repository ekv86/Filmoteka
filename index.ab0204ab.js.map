{"mappings":"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","sources":["src/api.js","src/markup.js","src/use_modal.js","src/error-image.js","src/common.js","src/index.js"],"sourcesContent":["const BASE_URL = 'https://api.themoviedb.org/3/';\nconst END_POINT_ALL = 'trending/movie/day';\nconst END_POINT_SEARCH = 'search/movie';\nconst END_POINT_DETAILS = 'movie/';\nconst KEY_API = '583e8699bc133adc4a2f7322eb108f1f';\n\nexport async function getAllFilms(page = 1) {\n    return await fetch(`${BASE_URL}${END_POINT_ALL}?api_key=${KEY_API}&page=${page}`)\n        .then(resp => {\n            if (!resp.ok) {\n                throw new Error(resp.statusText)\n            }\n            return resp.json();\n        })\n}\n\nexport async function getSearchFilms(searchQuery) {\n    return await fetch(`${BASE_URL}${END_POINT_SEARCH}?api_key=${KEY_API}&query=${searchQuery}`)\n        .then(resp => {\n            if (!resp.ok) {\n                throw new Error(resp.statusText)\n            }\n            return resp.json();\n        })\n}\n\nexport async function getFilmDetails(query) {\n    return await fetch(`${BASE_URL}${END_POINT_DETAILS}${query}?api_key=${KEY_API}`)\n        .then(resp => {\n            if (!resp.ok) {\n                throw new Error(resp.statusText)\n            }\n            return resp.json();\n        })\n}\n\nexport async function getGenres() {\n    const response = await fetch(`${BASE_URL}genre/movie/list?api_key=${KEY_API}`)\n    const genres = await response.json();\n    return genres;\n}","export function createMarkupFilms(arr) {\n    return arr.map(({ poster_path, title, release_date, id }) =>\n        `<li class=\"films__item\" data-id=\"${id}\">\n        <img class=\"films__img\" src=\"http://image.tmdb.org/t/p/w500${poster_path}\" alt=\"${title}\">\n        <h3 class=\"films__description text\">${title}</h3>\n        <span class=\"filmsGenres\"></span>\n        <span class=\"films__description text films__release\"> | ${release_date.split(\"-\")[0]}</span>\n        </li>`).join('')\n}\n\nexport function createMarkupDetails(obj) {\n    const { poster_path, title, vote_average, vote_count, popularity, original_title,\n        genres, overview } = obj;\n    let filmGenres = genres.map(genre => genre.name).join(', ');\n    const markupDetails = `<img src=\"http://image.tmdb.org/t/p/w500${poster_path}\" alt=\"${title}\" class=\"backdrop__description-img films__img\">\n        <div class=\"backdrop__info\"><h2 class=\"backdrop__description-title text\">${title}</h2>\n        <div class=\"backdrop__description-block\">\n        <p class=\"backdrop__description-option text\">Vote / Votes</p>\n        <div class=\"backdrop__description-value\">\n        <button class=\"text backdrop__description-vote\">${vote_average.toFixed(1)}</button>\n        <span class=\"text\">/</span>\n        <button class=\"text backdrop__description-vote vote_count\">${vote_count}</button></div>\n        <p class=\"backdrop__description-option text\">Popularity</p>\n        <p class=\"backdrop__description-value text\">${popularity.toFixed(1)}</p>\n        <p class=\"backdrop__description-option text\">Original Title</p>\n        <p class=\"backdrop__description-value text\">${original_title}</p>\n        <p class=\"backdrop__description-option text\">Genre</p>\n        <p class=\"backdrop__description-value text\">${filmGenres}</p>\n        </div>\n          <h3 class=\"backdrop__description-text_title text\">About</h3>\n          <p class=\"backdrop__description-text text\">${overview}</p></div>`;\n\n    return markupDetails;\n}\n\nexport function createMarkupForLibrary(arr) {\n    return arr.map(({ poster_path, title, release_date, id, vote_average }) =>\n        `<li class=\"films__item\" data-id=\"${id}\">\n        <img class=\"films__img\" src=\"http://image.tmdb.org/t/p/w500${poster_path}\" alt=\"${title}\">\n        <h3 class=\"films__description text\">${title}</h3>\n        <span class=\"filmsGenres\"></span>\n        <span class=\"films__description text films__release\"> | ${release_date.split(\"-\")[0]}</span>\n        <button class=\"backdrop__description-vote library__description-vote\">${vote_average.toFixed(1)}</button>\n        </li>`).join('')\n}","export function useModal() {\n    const closeBtnEl = document.querySelector('.js-close-btn');\n    const backdropEl = document.querySelector('.js-backdrop');\n    const backdropModalEl = document.querySelector('.js-backdrop-modal');\n\n    backdropEl.classList.remove(\"is-hidden\");\n\n    closeBtnEl.addEventListener('click', onClickCloseBtn);\n    window.addEventListener('keydown', onEscPress);\n    window.addEventListener('mousedown', onMouseDown);\n\n    function onClickCloseBtn() {\n        backdropEl.classList.add(\"is-hidden\");\n    }\n\n    function onEscPress(evt) {\n        if (evt.code === 'Escape') {\n            backdropEl.classList.add(\"is-hidden\");\n        }\n        if (backdropEl.classList.contains(\"is-hidden\")) {\n            window.removeEventListener('keydown', onEscPress)\n        }\n    }\n\n    function onMouseDown(evt) {\n        if (!backdropModalEl.contains(evt.target)) {\n            backdropEl.classList.add(\"is-hidden\");\n        }\n        if (backdropEl.classList.contains(\"is-hidden\")) {\n            window.removeEventListener('mousedown', onMouseDown);\n        }\n    }\n}\n","export function errorImage(arr, listEl) {\n    let errorImage = [];\n    arr.forEach(function (el) {\n        if (!el.poster_path) {\n            for (let i = 0; i < listEl.length; i += 1) {\n                if (listEl[i].dataset.id == el.id) {\n                    errorImage.push(listEl[i]);\n                }\n            }\n        }\n    })\n    errorImage.forEach(function (item) {\n        item.children[0].src = \"/no-photo.6ebb93e4.png\";\n    })\n}\n","export const common = {\n    keyWatchFilm: 'watchFilm',\n    keyQueFilm: 'queFilm'\n}","import './sass/index.css';\nimport { getAllFilms, getFilmDetails } from './api';\nimport { getGenres } from './api';\nimport { getSearchFilms } from './api';\nimport { createMarkupDetails } from './markup';\nimport { createMarkupFilms } from './markup';\nimport { useModal } from './use_modal';\nimport { errorImage } from './error-image';\nimport { common } from './common';\n\n\n\nconst filmListEl = document.querySelector('.js-film_list');\nconst filmFormEl = document.querySelector('.js-film-form');\nconst paginationEl = document.querySelector('.pagination');\nconst paginationListEl = document.querySelector('.js-pagination__list');\nconst prevPageEl = document.querySelector(\".js-pagination__arrow_prev\");\nconst nextPageEl = document.querySelector(\".js-pagination__arrow_next\");\nconst backdropDescriptionEl = document.querySelector('.backdrop__description');\nconst btnAddWatchEl = document.querySelector('.js-btn-watch');\nconst btnAddQueEl = document.querySelector('.js-btn-que');\nconst errorEl = document.querySelector(\".js-error\");\nconst errorSearchEl = document.querySelector('.js-error_search');\nconst loaderEl = document.querySelector('.loader');\n\nlet currentPage = 1;\nlet viewedFilm = {};\nlet watchFilmArr = JSON.parse(localStorage.getItem(common.keyWatchFilm)) ?? [];\nlet queFilmArr = JSON.parse(localStorage.getItem(common.keyQueFilm)) ?? [];\n\nfilmFormEl.addEventListener('submit', onSubmitForm);\nfilmListEl.addEventListener('click', onFilmClick);\nbtnAddQueEl.addEventListener('click', onAddQueClick);\nbtnAddWatchEl.addEventListener('click', onAddWatchClick);\n\n\nfunction fetchError() {\n    errorEl.style.display = \"block\";\n    prevPageEl.style.display = \"none\";\n    nextPageEl.style.display = \"none\";\n    loaderEl.style.display = 'none';\n}\n\nfunction searchError() {\n    errorSearchEl.style.display = \"block\";\n}\n\ngetAllFilms()\n    .then((data) => {\n        filmListEl.insertAdjacentHTML('beforeend', createMarkupFilms(data.results));\n        findGenres(data.results);\n        pagination();\n        loaderEl.style.display = 'none';\n    })\n    .catch(() => {\n        fetchError();\n    });\n\n\nfunction findGenres(arr) {\n    getGenres().then((genres) => {\n        let filmsGenres = filmListEl.getElementsByClassName('filmsGenres');\n        let genresArr = []\n\n        for (let i = 0; i < genres.genres.length; i += 1) {\n            let genreArr = [];\n            for (let j = 0; j < arr.length; j += 1) {\n                genreArr.splice(0, genreArr.length);\n                arr[j].genre_ids.forEach(function (number) {\n                    let genre = genres.genres.find(genre => genre.id === number);\n                    genreArr.push(genre.name);\n                })\n\n                genresArr.push(genreArr.join(', '))\n            }\n        }\n        for (let i = 0; i < filmsGenres.length; i += 1) {\n            filmsGenres[i].textContent = genresArr[i];\n        }\n    })\n        .catch(() => {\n            fetchError();\n        })\n}\n\nfunction onFilmClick(evt) {\n    if (evt.target === filmListEl) {\n        return\n    }\n    let filmId = evt.target.closest('.films__item').dataset.id;\n    useModal();\n    getFilmDetails(filmId)\n        .then((data) => {\n            backdropDescriptionEl.innerHTML = createMarkupDetails(data);\n            viewedFilm = data;\n            if (!data.poster_path) {\n                backdropDescriptionEl.children[0].src = \"/no-photo.6ebb93e4.png\";\n            }\n            loaderEl.style.display = 'none';\n        })\n        .catch(() => {\n            fetchError();\n        });\n    viewedFilm = {};\n}\n\nif (filmFormEl[0].value) {\n    window.addEventListener('keydown', onEscPress);\n\n    function onEscPress(evt) {\n        if (evt.code === 'Enter') {\n            onSubmitForm();\n        }\n\n        if (!filmFormEl[0].value) {\n            window.removeEventListener('keydown', onEscPress);\n        }\n        console.log(evt.code)\n    }\n}\n\nfunction onSubmitForm(evt) {\n    evt.preventDefault();\n    paginationEl.style.display = \"none\";\n    errorSearchEl.style.display = \"none\";\n\n    let currentSearch = evt.currentTarget.searchQuery.value;\n    let optimizationArr = currentSearch.toLowerCase().split(\" \");\n    for (let i = 0; i < optimizationArr.length; i += 1) {\n        optimizationArr[i] = optimizationArr[i][0].toUpperCase() + optimizationArr[i].substr(1);\n    }\n    let optimizationString = optimizationArr.join(\" \");\n\n    getSearchFilms(optimizationString)\n        .then((data) => {\n            console.log(data)\n            filmListEl.innerHTML = createMarkupFilms(data.results);\n            findGenres(data.results);\n            errorImage(data.results, filmListEl.children);\n\n            data.results.forEach(function (el) {\n                if (!el.poster_path) {\n                    throw new Error('There is no picture');\n                }\n            })\n\n            if (!data.total_results) {\n                throw new searchError();\n            }\n            filmListEl.innerHTML = \"\";\n            loaderEl.style.display = 'none';\n        })\n        .catch(() => {\n            console.log('There is no picture');\n        });\n    evt.currentTarget.searchQuery.value = '';\n}\n\nfunction onAddWatchClick() {\n    const inStorage = watchFilmArr.some(({ id }) => id === viewedFilm.id);\n    if (inStorage) {\n        return\n    }\n    watchFilmArr.push(viewedFilm);\n    localStorage.setItem(common.keyWatchFilm, JSON.stringify(watchFilmArr));\n}\n\nfunction onAddQueClick() {\n    const inStorage = queFilmArr.some(({ id }) => Number(id) === viewedFilm.id);\n    if (inStorage) {\n        return\n    }\n\n    queFilmArr.push(viewedFilm);\n    localStorage.setItem(common.keyQueFilm, JSON.stringify(queFilmArr));\n}\n\nfunction pagination() {\n    getAllFilms()\n        .then((data) => {\n            for (let i = 1; i <= data.total_pages; i += 1) {\n                let liEl = document.createElement(\"li\");\n                liEl.classList.add(\"pagination__item\");\n                liEl.classList.add(\"text\");\n                liEl.textContent = i;\n                paginationListEl.appendChild(liEl);\n            }\n\n            let active;\n            showPage(paginationListEl.children[0]);\n\n            for (let item of paginationListEl.children) {\n                item.addEventListener(\"click\", function () {\n                    showPage(this);\n                });\n            }\n\n            function showPage(item) {\n                if (active) {\n                    active.classList.remove(\"active\");\n                }\n                active = item;\n                item.classList.add(\"active\");\n                currentPage = item.textContent;\n\n                getAllFilms(currentPage)\n                    .then((data) => {\n                        filmListEl.insertAdjacentHTML('beforeend', createMarkupFilms(data.results));\n                        findGenres(data.results);\n                        errorImage(data.results, filmListEl.children);\n                        loaderEl.style.display = 'none';\n                    })\n                    .catch(() => {\n                        fetchError();\n                        paginationEl.style.display = \"none\";\n                    });\n                filmListEl.innerHTML = \"\";\n                hideOverPages();\n            }\n\n            nextPageEl.addEventListener(\"click\", onNextPageClick);\n            prevPageEl.addEventListener(\"click\", onPrevPageClick);\n\n            function onNextPageClick() {\n                if (active.nextElementSibling) {\n                    showPage(active.nextElementSibling);\n                }\n            }\n\n            function onPrevPageClick() {\n                if (active.previousElementSibling) {\n                    showPage(active.previousElementSibling);\n                }\n            }\n\n            function hideOverPages() {\n                let items = [...paginationListEl.children];\n                if (items.length > 5) {\n                    items.forEach((item) => item.classList.add(\"hide\"));\n                    items[0].classList.remove(\"hide\");\n                    try {\n                        if (active.previousElementSibling) {\n                            active.previousElementSibling.classList.remove(\"hide\");\n                            active.previousElementSibling.previousElementSibling.classList.remove(\"hide\");\n                        }\n\n                        active.classList.remove(\"hide\");\n                        if (active.nextElementSibling) {\n                            active.nextElementSibling.classList.remove(\"hide\");\n                            active.nextElementSibling.nextElementSibling.classList.remove(\"hide\");\n                        }\n                    }\n                    catch {\n                        if (active.previousElementSibling) {\n                            active.previousElementSibling.classList.remove(\"hide\");\n                        }\n\n                        active.classList.remove(\"hide\");\n                        if (active.nextElementSibling) {\n                            active.nextElementSibling.classList.remove(\"hide\");\n                        }\n                    }\n                }\n            }\n        })\n        .catch(error => console.log(error));\n}"],"names":["async","$2107b7db86dec8d6$export$675f4ba8ffc414f3","page","fetch","then","resp","ok","Error","statusText","json","$2107b7db86dec8d6$export$23af935b8963354e","searchQuery","$2107b7db86dec8d6$export$cb9b4ba94b6f0493","query","$2107b7db86dec8d6$export$c5604fa8028da00","response","$88074c8a2c2a5e3d$export$f62bf6ed0226d3e0","arr","map","poster_path","title","release_date","id","split","join","$88074c8a2c2a5e3d$export$93cf182b94770b04","obj","vote_average","vote_count","popularity","original_title","genres","overview","filmGenres","genre","name","toFixed","$e3620fae1184d15c$export$33ffd74ebf07f060","closeBtnEl","document","querySelector","backdropEl","backdropModalEl","classList","remove","addEventListener","add","window","onEscPress","evt","code","contains","removeEventListener","onMouseDown","target","$f3fbbd4dada940c9$export$75624d133646bc8a","listEl","errorImage1","forEach","el","i","length","dataset","push","item","children","src","$0aa3c05db5cfd8e5$export$919daad019702595","keyWatchFilm","keyQueFilm","$1f0dc3b9307be026$var$filmListEl","$1f0dc3b9307be026$var$filmFormEl","$1f0dc3b9307be026$var$paginationEl","$1f0dc3b9307be026$var$paginationListEl","$1f0dc3b9307be026$var$prevPageEl","$1f0dc3b9307be026$var$nextPageEl","$1f0dc3b9307be026$var$backdropDescriptionEl","$1f0dc3b9307be026$var$btnAddWatchEl","$1f0dc3b9307be026$var$btnAddQueEl","$1f0dc3b9307be026$var$errorEl","$1f0dc3b9307be026$var$errorSearchEl","$1f0dc3b9307be026$var$loaderEl","$1f0dc3b9307be026$var$currentPage","$1f0dc3b9307be026$var$viewedFilm","$1f0dc3b9307be026$var$ref","$1f0dc3b9307be026$var$watchFilmArr","JSON","parse","localStorage","getItem","$1f0dc3b9307be026$var$ref1","$1f0dc3b9307be026$var$queFilmArr","$1f0dc3b9307be026$var$fetchError","style","display","$1f0dc3b9307be026$var$searchError","$1f0dc3b9307be026$var$findGenres","filmsGenres","getElementsByClassName","genresArr","genreArr","j","splice","genre_ids","number","genre1","find","i1","textContent","catch","$1f0dc3b9307be026$var$onSubmitForm","filmId","closest","data","innerHTML","some","Number","setItem","stringify","insertAdjacentHTML","results","data1","total_pages","liEl","createElement","appendChild","active","showPage","item1","this","hideOverPages","onNextPageClick","nextElementSibling","onPrevPageClick","previousElementSibling","items","error","console","log","value","$1f0dc3b9307be026$var$onEscPress","preventDefault","optimizationArr","currentTarget","toLowerCase","toUpperCase","substr","total_results"],"version":3,"file":"index.ab0204ab.js.map"}