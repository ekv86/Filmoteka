async function e(e){return await fetch(`https://api.themoviedb.org/3/movie/${e}?api_key=583e8699bc133adc4a2f7322eb108f1f`).then((e=>{if(!e.ok)throw new Error(e.statusText);return e.json()}))}function t(e){const{poster_path:t,title:n,vote_average:i,vote_count:s,popularity:o,original_title:c,genres:l,overview:a}=e;let r=l.map((e=>e.name)).join(", ");return`<img src="http://image.tmdb.org/t/p/w500${t}" alt="${n}" class="backdrop__description-img films__img">\n        <div class="backdrop__info"><h2 class="backdrop__description-title text">${n}</h2>\n        <div class="backdrop__description-block">\n        <p class="backdrop__description-option text">Vote / Votes</p>\n        <div class="backdrop__description-value">\n        <button class="text backdrop__description-vote">${i.toFixed(1)}</button>\n        <span class="text">/</span>\n        <button class="text backdrop__description-vote vote_count">${s}</button></div>\n        <p class="backdrop__description-option text">Popularity</p>\n        <p class="backdrop__description-value text">${o.toFixed(1)}</p>\n        <p class="backdrop__description-option text">Original Title</p>\n        <p class="backdrop__description-value text">${c}</p>\n        <p class="backdrop__description-option text">Genre</p>\n        <p class="backdrop__description-value text">${r}</p>\n        </div>\n          <h3 class="backdrop__description-text_title text">About</h3>\n          <p class="backdrop__description-text text">${a}</p></div>`}function n(e){return e.map((({poster_path:e,title:t,release_date:n,id:i,vote_average:s})=>`<li class="films__item" data-id="${i}">\n        <img class="films__img" src="http://image.tmdb.org/t/p/w500${e}" alt="${t}">\n        <h3 class="films__description text">${t}</h3>\n        <span class="filmsGenres"></span>\n        <span class="films__description text films__release"> | ${n.split("-")[0]}</span>\n        <button class="backdrop__description-vote library__description-vote">${s.toFixed(1)}</button>\n        </li>`)).join("")}function i(){const e=document.querySelector(".js-close-btn"),t=document.querySelector(".js-backdrop"),n=document.querySelector(".js-backdrop-modal");t.classList.remove("is-hidden"),e.addEventListener("click",(function(){t.classList.add("is-hidden")})),window.addEventListener("keydown",(function e(n){"Escape"===n.code&&t.classList.add("is-hidden");t.classList.contains("is-hidden")&&window.removeEventListener("keydown",e)})),window.addEventListener("mousedown",(function e(i){n.contains(i.target)||t.classList.add("is-hidden");t.classList.contains("is-hidden")&&window.removeEventListener("mousedown",e)}))}function s(e,t){let n=[];e.forEach((function(e){if(!e.poster_path)for(let i=0;i<t.length;i+=1)t[i].dataset.id==e.id&&n.push(t[i])})),n.forEach((function(e){e.children[0].src="/no-photo.6ebb93e4.png"}))}const o=document.querySelector(".js-library-btn-watch"),c=document.querySelector(".js-library-btn-que"),l=document.querySelector(".js-film_list"),a=document.querySelector(".js-pagination__list"),r=document.querySelector(".js-pagination__arrow_prev"),d=document.querySelector(".js-pagination__arrow_next"),p=document.querySelector(".backdrop__description"),_=document.querySelector(".backdrop__buttons"),m=document.querySelector(".js-error"),u=document.querySelector(".loader"),b=localStorage.getItem("watchFilm"),v=JSON.parse(b),h=localStorage.getItem("queFilm"),g=JSON.parse(h);let f=4;function L(e){a.innerHTML="",l.innerHTML=n(e),y(e),function(e){let t,i=Math.ceil(e.length/f);for(let e=1;e<=i;e+=1){let t=document.createElement("li");t.classList.add("pagination__item"),t.classList.add("text"),t.textContent=e,a.appendChild(t)}o(a.children[0]);for(let e of a.children)e.addEventListener("click",(function(){o(this)}));function o(i){t&&t.classList.remove("active"),t=i,i.classList.add("active");let o=(i.textContent-1)*f,c=o+f,a=e.slice(o,c);l.innerHTML=n(a),y(a),_(),s(e,l.children)}function c(){t.nextElementSibling&&o(t.nextElementSibling)}function p(){t.previousElementSibling&&o(t.previousElementSibling)}function _(){let e=[...a.children];if(e.length>5){e.forEach((e=>e.classList.add("hide"))),e[0].classList.remove("hide");try{t.previousElementSibling&&(t.previousElementSibling.classList.remove("hide"),t.previousElementSibling.previousElementSibling.classList.remove("hide")),t.classList.remove("hide"),t.nextElementSibling&&(t.nextElementSibling.classList.remove("hide"),t.nextElementSibling.nextElementSibling.classList.remove("hide"))}catch{t.previousElementSibling&&t.previousElementSibling.classList.remove("hide"),t.classList.remove("hide"),t.nextElementSibling&&t.nextElementSibling.classList.remove("hide")}}}d.addEventListener("click",c),r.addEventListener("click",p)}(e)}function y(e){let t=l.getElementsByClassName("filmsGenres");for(let n=0;n<t.length;n+=1){let i=e[n].genres.map((e=>e.name));t[n].textContent=i.join(", ")}}window.innerWidth>767&&(f=6),window.innerWidth>1279&&(f=9),c.addEventListener("click",(function(){o.classList.remove("active__btn"),c.classList.add("active__btn"),L(g)})),o.addEventListener("click",(function(){o.classList.add("active__btn"),c.classList.remove("active__btn"),L(v)})),l.addEventListener("click",(function(n){if(n.target===l)return;let s=n.target.closest(".films__item").dataset.id;i(),_.style.display="none",p.style.marginBottom="0",e(s).then((e=>{p.innerHTML=t(e),e.poster_path||(p.children[0].src="/no-photo.6ebb93e4.png"),u.style.display="none"})).catch((()=>{m.style.display="block",r.style.display="none",d.style.display="none",u.style.display="none"}))})),o.classList.add("active__btn"),u.style.display="none",L(v);
//# sourceMappingURL=library.d2fd29b3.js.map
