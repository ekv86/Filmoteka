!function(){function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},i={},r=t.parcelRequired7c6;null==r&&((r=function(e){if(e in n)return n[e].exports;if(e in i){var t=i[e];delete i[e];var r={id:e,exports:{}};return n[e]=r,t.call(r.exports,r,r.exports),r.exports}var l=new Error("Cannot find module '"+e+"'");throw l.code="MODULE_NOT_FOUND",l}).register=function(e,t){i[e]=t},t.parcelRequired7c6=r);var l,o,s=r("8nrFW"),a=r("446fK"),c=(r("446fK"),a=r("446fK"),r("knNGv")),u=(c=r("knNGv"),r("a5TQa")),d={keyWatchFilm:"watchFilm",keyQueFilm:"queFilm"},f=document.querySelector(".js-film_list"),m=document.querySelector(".js-film-form"),p=document.querySelector(".pagination"),v=document.querySelector(".js-pagination__list"),g=document.querySelector(".js-pagination__arrow_prev"),h=document.querySelector(".js-pagination__arrow_next"),y=document.querySelector(".backdrop__description"),S=document.querySelector(".js-btn-watch"),E=document.querySelector(".js-btn-que"),b=document.querySelector(".js-error"),L=document.querySelector(".js-error_search"),_=document.querySelector(".loader"),k=1,w={},x=null!==(l=JSON.parse(localStorage.getItem(d.keyWatchFilm)))&&void 0!==l?l:[],F=null!==(o=JSON.parse(localStorage.getItem(d.keyQueFilm)))&&void 0!==o?o:[];function q(){b.style.display="block",g.style.display="none",h.style.display="none",_.style.display="none"}function T(){L.style.display="block"}function j(e){(0,a.getGenres)().then((function(t){for(var n=f.getElementsByClassName("filmsGenres"),i=[],r=0;r<t.genres.length;r+=1)for(var l=[],o=0;o<e.length;o+=1)l.splice(0,l.length),e[o].genre_ids.forEach((function(e){var n=t.genres.find((function(t){return t.id===e}));l.push(n.name)})),i.push(l.join(", "));for(var s=0;s<n.length;s+=1)n[s].textContent=i[s]})).catch((function(){q()}))}if(m.addEventListener("submit",M),f.addEventListener("click",(function(e){if(e.target===f)return;var t=e.target.closest(".films__item").dataset.id;(0,u.useModal)(),(0,a.getFilmDetails)(t).then((function(e){y.innerHTML=(0,c.createMarkupDetails)(e),w=e,_.style.display="none"})).catch((function(){q()})),w={}})),E.addEventListener("click",(function(){if(F.some((function(e){var t=e.id;return Number(t)===w.id})))return;F.push(w),localStorage.setItem(d.keyQueFilm,JSON.stringify(F))})),S.addEventListener("click",(function(){if(x.some((function(e){return e.id===w.id})))return;x.push(w),localStorage.setItem(d.keyWatchFilm,JSON.stringify(x))})),(0,a.getAllFilms)().then((function(t){f.insertAdjacentHTML("beforeend",(0,c.createMarkupFilms)(t.results)),console.log(t.results),j(t.results),(0,a.getAllFilms)().then((function(t){for(var n=1;n<=t.total_pages;n+=1){var i=document.createElement("li");i.classList.add("pagination__item"),i.classList.add("text"),i.textContent=n,v.appendChild(i)}var r;y(v.children[0]);var l=!0,o=!1,u=void 0;try{for(var d,m=v.children[Symbol.iterator]();!(l=(d=m.next()).done);l=!0)d.value.addEventListener("click",(function(){y(this)}))}catch(e){o=!0,u=e}finally{try{l||null==m.return||m.return()}finally{if(o)throw u}}function y(e){r&&r.classList.remove("active"),r=e,e.classList.add("active"),k=e.textContent,(0,a.getAllFilms)(k).then((function(e){f.insertAdjacentHTML("beforeend",(0,c.createMarkupFilms)(e.results)),j(e.results),_.style.display="none"})).catch((function(){q(),p.style.display="none"})),f.innerHTML="",b()}function S(){r.nextElementSibling&&y(r.nextElementSibling)}function E(){r.previousElementSibling&&y(r.previousElementSibling)}function b(){var t=e(s)(v.children);if(t.length>5){t.forEach((function(e){return e.classList.add("hide")})),t[0].classList.remove("hide");try{r.previousElementSibling&&(r.previousElementSibling.classList.remove("hide"),r.previousElementSibling.previousElementSibling.classList.remove("hide")),r.classList.remove("hide"),r.nextElementSibling&&(r.nextElementSibling.classList.remove("hide"),r.nextElementSibling.nextElementSibling.classList.remove("hide"))}catch(e){r.previousElementSibling&&r.previousElementSibling.classList.remove("hide"),r.classList.remove("hide"),r.nextElementSibling&&r.nextElementSibling.classList.remove("hide")}}}h.addEventListener("click",S),g.addEventListener("click",E)})).catch((function(e){return console.log(e)})),_.style.display="none"})).catch((function(){q()})),m[0].value){window.addEventListener("keydown",(function e(t){"Enter"===t.code&&M();m[0].value||window.removeEventListener("keydown",e);console.log(t.code)}))}function M(e){e.preventDefault(),p.style.display="none",L.style.display="none";for(var t=e.currentTarget.searchQuery.value.toLowerCase().split(" "),n=0;n<t.length;n+=1)t[n]=t[n][0].toUpperCase()+t[n].substr(1);var i=t.join(" ");(0,a.getSearchFilms)(i).then((function(e){if(console.log(e),f.innerHTML=(0,c.createMarkupFilms)(e.results),j(e.results),e.results.forEach((function(e){if(!e.poster_path)throw new Error("There is no picture")})),!e.total_results)throw new T;f.innerHTML="",_.style.display="none"})).catch((function(){console.log("There is no picture")})),e.currentTarget.searchQuery.value=""}}();
//# sourceMappingURL=index.525c4213.js.map
