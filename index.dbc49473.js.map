{"mappings":"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","sources":["node_modules/@parcel/runtime-js/lib/helpers/bundle-manifest.js","node_modules/@parcel/runtime-js/lib/runtime-9a690e285a592c6f.js","src/api.js","node_modules/@parcel/runtime-js/lib/runtime-3d466aeaf48f4273.js","src/markup.js","src/use_modal.js","src/common.js","src/index.js"],"sourcesContent":["\"use strict\";\n\nvar mapping = {};\n\nfunction register(pairs) {\n  var keys = Object.keys(pairs);\n\n  for (var i = 0; i < keys.length; i++) {\n    mapping[keys[i]] = pairs[keys[i]];\n  }\n}\n\nfunction resolve(id) {\n  var resolved = mapping[id];\n\n  if (resolved == null) {\n    throw new Error('Could not resolve bundle with id ' + id);\n  }\n\n  return resolved;\n}\n\nmodule.exports.register = register;\nmodule.exports.resolve = resolve;","require('./helpers/bundle-manifest').register(JSON.parse(\"{\\\"5ZPII\\\":\\\"index.dbc49473.js\\\",\\\"8Ac76\\\":\\\"no-photo.8c94442b.png\\\",\\\"8aJ8o\\\":\\\"index.71e4ef0f.css\\\"}\"));","const BASE_URL = 'https://api.themoviedb.org/3/';\nconst END_POINT_ALL = 'trending/movie/day';\nconst END_POINT_SEARCH = 'search/movie';\nconst END_POINT_DETAILS = 'movie/';\nconst KEY_API = '583e8699bc133adc4a2f7322eb108f1f';\n\nexport async function getAllFilms(page = 1) {\n    return await fetch(`${BASE_URL}${END_POINT_ALL}?api_key=${KEY_API}&page=${page}`)\n        .then(resp => {\n            if (!resp.ok) {\n                throw new Error(resp.statusText)\n            }\n            return resp.json();\n        })\n}\n\nexport async function getSearchFilms(searchQuery) {\n    return await fetch(`${BASE_URL}${END_POINT_SEARCH}?api_key=${KEY_API}&query=${searchQuery}`)\n        .then(resp => {\n            if (!resp.ok) {\n                throw new Error(resp.statusText)\n            }\n            return resp.json();\n        })\n}\n\nexport async function getFilmDetails(query) {\n    return await fetch(`${BASE_URL}${END_POINT_DETAILS}${query}?api_key=${KEY_API}`)\n        .then(resp => {\n            if (!resp.ok) {\n                throw new Error(resp.statusText)\n            }\n            return resp.json();\n        })\n}\n\nexport async function getGenres() {\n    const response = await fetch(`${BASE_URL}genre/movie/list?api_key=${KEY_API}`)\n    const genres = await response.json();\n    return genres;\n}","module.exports = new __parcel__URL__(require('./helpers/bundle-manifest').resolve(\"8Ac76\")).toString();","import imageError from './images/no-photo.png';\n\nconst imgPath = 'http://image.tmdb.org/t/p/w500';\nexport function createMarkupFilms(arr) {\n    return arr.map((obj) => createMarkupForFilm(obj)).join('');\n    function createMarkupForFilm(obj) {\n        const { title, release_date, id, poster_path } = obj;\n        let src = `${imgPath}${poster_path}`;\n        if (!obj.poster_path) {\n            src = imageError\n        }\n        const markupFilms = `<li class=\"films__item\" data-id=\"${id}\">\n        <img class=\"films__img\" src=\"${src}\" alt=\"${title}\">\n        <h3 class=\"films__description text\">${title}</h3>\n        <span class=\"filmsGenres\"></span>\n        <span class=\"films__description text films__release\"> | ${release_date.split(\"-\")[0]}</span></li>`;\n        return markupFilms;\n    }\n}\n\nexport function createMarkupDetails(obj) {\n    const { poster_path, title, vote_average, vote_count, popularity, original_title,\n        genres, overview } = obj;\n    let src = `${imgPath}${poster_path}`;\n    if (!obj.poster_path) {\n        src = imageError;\n    }\n    let filmGenres = genres.map(genre => genre.name).join(', ');\n    const markupDetails = `<img src=\"${src}\" alt=\"${title}\" class=\"backdrop__description-img films__img\">\n        <div class=\"backdrop__info\"><h2 class=\"backdrop__description-title text\">${title}</h2>\n        <div class=\"backdrop__description-block\">\n        <p class=\"backdrop__description-option text\">Vote / Votes</p>\n        <div class=\"backdrop__description-value\">\n        <button class=\"text backdrop__description-vote\">${vote_average.toFixed(1)}</button>\n        <span class=\"text\">/</span>\n        <button class=\"text backdrop__description-vote vote_count\">${vote_count}</button></div>\n        <p class=\"backdrop__description-option text\">Popularity</p>\n        <p class=\"backdrop__description-value text\">${popularity.toFixed(1)}</p>\n        <p class=\"backdrop__description-option text\">Original Title</p>\n        <p class=\"backdrop__description-value text\">${original_title}</p>\n        <p class=\"backdrop__description-option text\">Genre</p>\n        <p class=\"backdrop__description-value text\">${filmGenres}</p>\n        </div>\n          <h3 class=\"backdrop__description-text_title text\">About</h3>\n          <p class=\"backdrop__description-text text\">${overview}</p></div>`;\n\n    return markupDetails;\n}\n\nexport function createMarkupForLibrary(arr) {\n    return arr.map((obj) => createMarkupForFilm(obj)).join('');\n    function createMarkupForFilm(obj) {\n        const { poster_path, title, release_date, id, vote_average } = obj;\n        let src = `${imgPath}${poster_path}`;\n        if (!obj.poster_path) {\n            src = imageError\n        }\n        const markupFilms = `<li class=\"films__item\" data-id=\"${id}\">\n        <img class=\"films__img\" src=\"${src}\" alt=\"${title}\">\n        <h3 class=\"films__description text\">${title}</h3>\n        <span class=\"filmsGenres\"></span>\n        <span class=\"films__description text films__release\"> | ${release_date.split(\"-\")[0]}</span>\n        <button class=\"backdrop__description-vote library__description-vote\">${vote_average.toFixed(1)}</button>\n        </li>`;\n        return markupFilms;\n    }\n}","export function useModal() {\n    const closeBtnEl = document.querySelector('.js-close-btn');\n    const backdropEl = document.querySelector('.js-backdrop');\n    const backdropModalEl = document.querySelector('.js-backdrop-modal');\n\n    backdropEl.classList.remove(\"is-hidden\");\n\n    closeBtnEl.addEventListener('click', onClickCloseBtn);\n    window.addEventListener('keydown', onEscPress);\n    window.addEventListener('mousedown', onMouseDown);\n\n    function onClickCloseBtn() {\n        backdropEl.classList.add(\"is-hidden\");\n    }\n\n    function onEscPress(evt) {\n        if (evt.code === 'Escape') {\n            backdropEl.classList.add(\"is-hidden\");\n        }\n        if (backdropEl.classList.contains(\"is-hidden\")) {\n            window.removeEventListener('keydown', onEscPress)\n        }\n    }\n\n    function onMouseDown(evt) {\n        if (!backdropModalEl.contains(evt.target)) {\n            backdropEl.classList.add(\"is-hidden\");\n        }\n        if (backdropEl.classList.contains(\"is-hidden\")) {\n            window.removeEventListener('mousedown', onMouseDown);\n        }\n    }\n}\n","export const common = {\n    keyWatchFilm: 'watchFilm',\n    keyQueFilm: 'queFilm'\n}","import './sass/index.css';\nimport { getAllFilms, getFilmDetails } from './api';\nimport { getGenres } from './api';\nimport { getSearchFilms } from './api';\nimport { createMarkupDetails } from './markup';\nimport { createMarkupFilms } from './markup';\nimport { useModal } from './use_modal';\nimport { common } from './common';\n\n\nconst filmListEl = document.querySelector('.js-film_list');\nconst filmFormEl = document.querySelector('.js-film-form');\nconst paginationEl = document.querySelector('.pagination');\nconst paginationListEl = document.querySelector('.js-pagination__list');\nconst prevPageEl = document.querySelector(\".js-pagination__arrow_prev\");\nconst nextPageEl = document.querySelector(\".js-pagination__arrow_next\");\nconst backdropDescriptionEl = document.querySelector('.backdrop__description');\nconst btnAddWatchEl = document.querySelector('.js-btn-watch');\nconst btnAddQueEl = document.querySelector('.js-btn-que');\nconst errorEl = document.querySelector(\".js-error\");\nconst errorSearchEl = document.querySelector('.js-error_search');\nconst loaderEl = document.querySelector('.loader');\n\nlet currentPage = 1;\nlet viewedFilm = {};\nlet watchFilmArr = JSON.parse(localStorage.getItem(common.keyWatchFilm)) ?? [];\nlet queFilmArr = JSON.parse(localStorage.getItem(common.keyQueFilm)) ?? [];\n\nfilmFormEl.addEventListener('submit', onSubmitForm);\nfilmListEl.addEventListener('click', onFilmClick);\nbtnAddQueEl.addEventListener('click', onAddQueClick);\nbtnAddWatchEl.addEventListener('click', onAddWatchClick);\n\n\nfunction fetchError() {\n    errorEl.style.display = \"block\";\n    prevPageEl.style.display = \"none\";\n    nextPageEl.style.display = \"none\";\n    loaderEl.style.display = 'none';\n}\n\nfunction searchError() {\n    errorSearchEl.style.display = \"block\";\n}\n\ngetAllFilms()\n    .then((data) => {\n        filmListEl.insertAdjacentHTML('beforeend', createMarkupFilms(data.results));\n        console.log(data.results)\n        findGenres(data.results);\n        pagination();\n        loaderEl.style.display = 'none';\n    })\n    .catch(() => {\n        fetchError();\n    });\n\n\nfunction findGenres(arr) {\n    getGenres().then((genres) => {\n        let filmsGenres = filmListEl.getElementsByClassName('filmsGenres');\n        let genresArr = []\n\n        for (let i = 0; i < genres.genres.length; i += 1) {\n            let genreArr = [];\n            for (let j = 0; j < arr.length; j += 1) {\n                genreArr.splice(0, genreArr.length);\n                arr[j].genre_ids.forEach(function (number) {\n                    let genre = genres.genres.find(genre => genre.id === number);\n                    genreArr.push(genre.name);\n                })\n\n                genresArr.push(genreArr.join(', '))\n            }\n        }\n        for (let i = 0; i < filmsGenres.length; i += 1) {\n            filmsGenres[i].textContent = genresArr[i];\n        }\n    })\n        .catch(() => {\n            fetchError();\n        })\n}\n\nfunction onFilmClick(evt) {\n    if (evt.target === filmListEl) {\n        return\n    }\n    let filmId = evt.target.closest('.films__item').dataset.id;\n    useModal();\n    getFilmDetails(filmId)\n        .then((data) => {\n            backdropDescriptionEl.innerHTML = createMarkupDetails(data);\n            viewedFilm = data;\n            loaderEl.style.display = 'none';\n        })\n        .catch(() => {\n            fetchError();\n        });\n    viewedFilm = {};\n}\n\nif (filmFormEl[0].value) {\n    window.addEventListener('keydown', onEscPress);\n\n    function onEscPress(evt) {\n        if (evt.code === 'Enter') {\n            onSubmitForm();\n        }\n\n        if (!filmFormEl[0].value) {\n            window.removeEventListener('keydown', onEscPress);\n        }\n        console.log(evt.code)\n    }\n}\n\nfunction onSubmitForm(evt) {\n    evt.preventDefault();\n    paginationEl.style.display = \"none\";\n    errorSearchEl.style.display = \"none\";\n\n    let currentSearch = evt.currentTarget.searchQuery.value;\n    let optimizationArr = currentSearch.toLowerCase().split(\" \");\n    for (let i = 0; i < optimizationArr.length; i += 1) {\n        optimizationArr[i] = optimizationArr[i][0].toUpperCase() + optimizationArr[i].substr(1);\n    }\n    let optimizationString = optimizationArr.join(\" \");\n\n    getSearchFilms(optimizationString)\n        .then((data) => {\n            console.log(data)\n            filmListEl.innerHTML = createMarkupFilms(data.results);\n            findGenres(data.results);\n\n            data.results.forEach(function (el) {\n                if (!el.poster_path) {\n                    throw new Error('There is no picture');\n                }\n            })\n\n            if (!data.total_results) {\n                throw new searchError();\n            }\n            filmListEl.innerHTML = \"\";\n            loaderEl.style.display = 'none';\n        })\n        .catch(() => {\n            console.log('There is no picture');\n        });\n    evt.currentTarget.searchQuery.value = '';\n}\n\nfunction onAddWatchClick() {\n    const inStorage = watchFilmArr.some(({ id }) => id === viewedFilm.id);\n    if (inStorage) {\n        return\n    }\n    watchFilmArr.push(viewedFilm);\n    localStorage.setItem(common.keyWatchFilm, JSON.stringify(watchFilmArr));\n}\n\nfunction onAddQueClick() {\n    const inStorage = queFilmArr.some(({ id }) => Number(id) === viewedFilm.id);\n    if (inStorage) {\n        return\n    }\n\n    queFilmArr.push(viewedFilm);\n    localStorage.setItem(common.keyQueFilm, JSON.stringify(queFilmArr));\n}\n\nfunction pagination() {\n    getAllFilms()\n        .then((data) => {\n            for (let i = 1; i <= data.total_pages; i += 1) {\n                let liEl = document.createElement(\"li\");\n                liEl.classList.add(\"pagination__item\");\n                liEl.classList.add(\"text\");\n                liEl.textContent = i;\n                paginationListEl.appendChild(liEl);\n            }\n\n            let active;\n            showPage(paginationListEl.children[0]);\n\n            for (let item of paginationListEl.children) {\n                item.addEventListener(\"click\", function () {\n                    showPage(this);\n                });\n            }\n\n            function showPage(item) {\n                if (active) {\n                    active.classList.remove(\"active\");\n                }\n                active = item;\n                item.classList.add(\"active\");\n                currentPage = item.textContent;\n\n                getAllFilms(currentPage)\n                    .then((data) => {\n                        filmListEl.insertAdjacentHTML('beforeend', createMarkupFilms(data.results));\n                        findGenres(data.results);\n                        loaderEl.style.display = 'none';\n                    })\n                    .catch(() => {\n                        fetchError();\n                        paginationEl.style.display = \"none\";\n                    });\n                filmListEl.innerHTML = \"\";\n                hideOverPages();\n            }\n\n            nextPageEl.addEventListener(\"click\", onNextPageClick);\n            prevPageEl.addEventListener(\"click\", onPrevPageClick);\n\n            function onNextPageClick() {\n                if (active.nextElementSibling) {\n                    showPage(active.nextElementSibling);\n                }\n            }\n\n            function onPrevPageClick() {\n                if (active.previousElementSibling) {\n                    showPage(active.previousElementSibling);\n                }\n            }\n\n            function hideOverPages() {\n                let items = [...paginationListEl.children];\n                if (items.length > 5) {\n                    items.forEach((item) => item.classList.add(\"hide\"));\n                    items[0].classList.remove(\"hide\");\n                    try {\n                        if (active.previousElementSibling) {\n                            active.previousElementSibling.classList.remove(\"hide\");\n                            active.previousElementSibling.previousElementSibling.classList.remove(\"hide\");\n                        }\n\n                        active.classList.remove(\"hide\");\n                        if (active.nextElementSibling) {\n                            active.nextElementSibling.classList.remove(\"hide\");\n                            active.nextElementSibling.nextElementSibling.classList.remove(\"hide\");\n                        }\n                    }\n                    catch {\n                        if (active.previousElementSibling) {\n                            active.previousElementSibling.classList.remove(\"hide\");\n                        }\n\n                        active.classList.remove(\"hide\");\n                        if (active.nextElementSibling) {\n                            active.nextElementSibling.classList.remove(\"hide\");\n                        }\n                    }\n                }\n            }\n        })\n        .catch(error => console.log(error));\n}"],"names":["$ef7689007096c8a0$export$6503ec6e8aabbaf","$ef7689007096c8a0$export$f7ad0328861e2f03","$ef7689007096c8a0$var$mapping","pairs","keys","Object","i","length","id","resolved","Error","parcelRequire","register","JSON","parse","async","$2107b7db86dec8d6$export$675f4ba8ffc414f3","page","fetch","then","resp","ok","statusText","json","$2107b7db86dec8d6$export$23af935b8963354e","searchQuery","$2107b7db86dec8d6$export$cb9b4ba94b6f0493","query","$2107b7db86dec8d6$export$c5604fa8028da00","response","$f132664a94aa2e33$exports","URL","resolve","import","meta","url","toString","$88074c8a2c2a5e3d$export$f62bf6ed0226d3e0","arr","map","obj","title","release_date","poster_path","src","$parcel$interopDefault","split","createMarkupForFilm","join","$88074c8a2c2a5e3d$export$93cf182b94770b04","vote_average","vote_count","popularity","original_title","genres","overview","filmGenres","genre","name","toFixed","$e3620fae1184d15c$export$33ffd74ebf07f060","closeBtnEl","document","querySelector","backdropEl","backdropModalEl","classList","remove","addEventListener","add","window","onEscPress","evt","code","contains","removeEventListener","onMouseDown","target","$0aa3c05db5cfd8e5$export$919daad019702595","keyWatchFilm","keyQueFilm","$1f0dc3b9307be026$var$filmListEl","$1f0dc3b9307be026$var$filmFormEl","$1f0dc3b9307be026$var$paginationEl","$1f0dc3b9307be026$var$paginationListEl","$1f0dc3b9307be026$var$prevPageEl","$1f0dc3b9307be026$var$nextPageEl","$1f0dc3b9307be026$var$backdropDescriptionEl","$1f0dc3b9307be026$var$btnAddWatchEl","$1f0dc3b9307be026$var$btnAddQueEl","$1f0dc3b9307be026$var$errorEl","$1f0dc3b9307be026$var$errorSearchEl","$1f0dc3b9307be026$var$loaderEl","$1f0dc3b9307be026$var$currentPage","$1f0dc3b9307be026$var$viewedFilm","$1f0dc3b9307be026$var$ref","$1f0dc3b9307be026$var$watchFilmArr","localStorage","getItem","$1f0dc3b9307be026$var$ref1","$1f0dc3b9307be026$var$queFilmArr","$1f0dc3b9307be026$var$fetchError","style","display","$1f0dc3b9307be026$var$searchError","$1f0dc3b9307be026$var$findGenres","filmsGenres","getElementsByClassName","genresArr","genreArr","j","splice","genre_ids","forEach","number","genre1","find","push","i1","textContent","catch","$1f0dc3b9307be026$var$onSubmitForm","filmId","closest","dataset","data","innerHTML","some","Number","setItem","stringify","insertAdjacentHTML","results","console","log","data1","total_pages","liEl","createElement","appendChild","active","showPage","children","item1","this","item","hideOverPages","onNextPageClick","nextElementSibling","onPrevPageClick","previousElementSibling","items","error","value","$1f0dc3b9307be026$var$onEscPress","preventDefault","optimizationArr","currentTarget","toLowerCase","toUpperCase","substr","el","total_results"],"version":3,"file":"index.dbc49473.js.map"}