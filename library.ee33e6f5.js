async function e(e){return await fetch(`https://api.themoviedb.org/3/movie/${e}?api_key=583e8699bc133adc4a2f7322eb108f1f`).then((e=>{if(!e.ok)throw new Error(e.statusText);return e.json()}))}function t(e){const{poster_path:t,title:i,vote_average:n,vote_count:s,popularity:o,original_title:c,genres:l,overview:a}=e;let r=l.map((e=>e.name)).join(", ");return`<img src="http://image.tmdb.org/t/p/w500${t}" alt="${i}" class="backdrop__description-img films__img">\n        <div class="backdrop__info"><h2 class="backdrop__description-title text">${i}</h2>\n        <div class="backdrop__description-block">\n        <p class="backdrop__description-option text">Vote / Votes</p>\n        <div class="backdrop__description-value">\n        <button class="text backdrop__description-vote">${n.toFixed(1)}</button>\n        <span class="text">/</span>\n        <button class="text backdrop__description-vote vote_count">${s}</button></div>\n        <p class="backdrop__description-option text">Popularity</p>\n        <p class="backdrop__description-value text">${o.toFixed(1)}</p>\n        <p class="backdrop__description-option text">Original Title</p>\n        <p class="backdrop__description-value text">${c}</p>\n        <p class="backdrop__description-option text">Genre</p>\n        <p class="backdrop__description-value text">${r}</p>\n        </div>\n          <h3 class="backdrop__description-text_title text">About</h3>\n          <p class="backdrop__description-text text">${a}</p></div>`}function i(e){return e.map((({poster_path:e,title:t,release_date:i,id:n,vote_average:s})=>`<li class="films__item" data-id="${n}">\n        <img class="films__img" src="http://image.tmdb.org/t/p/w500${e}" alt="${t}">\n        <h3 class="films__description text">${t}</h3>\n        <div class="films__options">\n        <span class="filmsGenres"></span>\n        <span class="films__description text films__release"> | ${i.split("-")[0]}</span></div>\n        <button class="backdrop__description-vote library__description-vote">${s.toFixed(1)}</button>\n        </li>`)).join("")}function n(){const e=document.querySelector(".js-close-btn"),t=document.querySelector(".js-backdrop"),i=document.querySelector(".js-backdrop-modal");t.classList.remove("is-hidden"),e.addEventListener("click",(function(){t.classList.add("is-hidden")})),window.addEventListener("keydown",(function e(i){"Escape"===i.code&&t.classList.add("is-hidden");t.classList.contains("is-hidden")&&window.removeEventListener("keydown",e)})),window.addEventListener("mousedown",(function e(n){i.contains(n.target)||t.classList.add("is-hidden");t.classList.contains("is-hidden")&&window.removeEventListener("mousedown",e)}))}function s(e,t){let i=[];e.forEach((function(e){if(!e.poster_path)for(let n=0;n<t.length;n+=1)t[n].dataset.id==e.id&&i.push(t[n])})),i.forEach((function(e){e.children[0].src="/Filmoteka/no-photo.8c94442b.png",console.log(e)}))}const o=document.querySelector(".js-library-btn-watch"),c=document.querySelector(".js-library-btn-que"),l=document.querySelector(".js-film_list"),a=document.querySelector(".js-pagination__list"),r=document.querySelector(".js-pagination__arrow_prev"),d=document.querySelector(".js-pagination__arrow_next"),p=document.querySelector(".backdrop__description"),m=document.querySelector(".backdrop__buttons"),_=document.querySelector(".js-error"),u=document.querySelector(".loader"),v=localStorage.getItem("watchFilm"),b=JSON.parse(v),h=localStorage.getItem("queFilm"),g=JSON.parse(h);let f=4;function L(e){a.innerHTML="",l.innerHTML=i(e),y(e),function(e){let t,n=Math.ceil(e.length/f);for(let e=1;e<=n;e+=1){let t=document.createElement("li");t.classList.add("pagination__item"),t.classList.add("text"),t.textContent=e,a.appendChild(t)}o(a.children[0]);for(let e of a.children)e.addEventListener("click",(function(){o(this)}));function o(n){t&&t.classList.remove("active"),t=n,n.classList.add("active");let o=(n.textContent-1)*f,c=o+f,a=e.slice(o,c);l.innerHTML=i(a),y(a),m(),s(e,l.children)}function c(){t.nextElementSibling&&o(t.nextElementSibling)}function p(){t.previousElementSibling&&o(t.previousElementSibling)}function m(){let e=[...a.children];if(e.length>5){e.forEach((e=>e.classList.add("hide"))),e[0].classList.remove("hide");try{t.previousElementSibling&&(t.previousElementSibling.classList.remove("hide"),t.previousElementSibling.previousElementSibling.classList.remove("hide")),t.classList.remove("hide"),t.nextElementSibling&&(t.nextElementSibling.classList.remove("hide"),t.nextElementSibling.nextElementSibling.classList.remove("hide"))}catch{t.previousElementSibling&&t.previousElementSibling.classList.remove("hide"),t.classList.remove("hide"),t.nextElementSibling&&t.nextElementSibling.classList.remove("hide")}}}d.addEventListener("click",c),r.addEventListener("click",p)}(e)}function y(e){let t=l.getElementsByClassName("filmsGenres");for(let i=0;i<t.length;i+=1){let n=e[i].genres.map((e=>e.name));t[i].textContent=n.join(", ")}}window.innerWidth>767&&(f=6),window.innerWidth>1279&&(f=9),c.addEventListener("click",(function(){o.classList.remove("active__btn"),c.classList.add("active__btn"),L(g)})),o.addEventListener("click",(function(){o.classList.add("active__btn"),c.classList.remove("active__btn"),L(b)})),l.addEventListener("click",(function(i){if(i.target===l)return;let s=i.target.closest(".films__item").dataset.id;n(),m.style.display="none",p.style.marginBottom="0",e(s).then((e=>{p.innerHTML=t(e),e.poster_path||(p.children[0].src="./images/no-photo.png"),u.style.display="none"})).catch((()=>{_.style.display="block",r.style.display="none",d.style.display="none",u.style.display="none"}))})),o.classList.add("active__btn"),u.style.display="none",L(b);
//# sourceMappingURL=library.ee33e6f5.js.map
